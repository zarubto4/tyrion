
@import models.project.b_program.servers.Cloud_Homer_Server
@import models.compiler.Cloud_Compilation_Server
@import utilities.Server

<section class="content-header">
    <h1> External Servers </h1>
    <ol class="breadcrumb">
        <li><a href="@routes.DashboardController.index()"><i class="fa fa-globe"></i> Dashboard </a></li>
        <li class="active"><i class="fa fa-share"></i> Server Management </li>
        <li class="active"><i class="fa fa-wrench"></i> External Servers </li>
    </ol>
</section>

@*/*/*  CompilationServer -----------------------------------------------------------------------------------------  */*/*@

<section class="content">



    <div id="editCompilationServerModal" style="display: none;" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Edit Type of Board</h4>
                </div>
                <div class="modal-body">
                    <form id="editCompilationServer">

                        <label id="typeOfBoardId" style="display: block">ID</label>
                        <label>Server name</label> <input style="display: block" type="text" name="name" >

                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default pull-left" type="button" data-dismiss="modal" onclick="$('#editCompilationServerModal').css('display','none')">Close</button>
                    <button id="editCompilationServerButton" value="" class="btn btn-primary" type="button" onclick="editCompilationServer(this.value)">Save changes</button>
                </div>
            </div>
        </div>
    </div>


    <div id="createCompilationServerModal" style="display: none;" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Create new Compilation Server</h4>
                </div>
                <div class="modal-body">
                    <form id="newCompilationServer">
                        <label>Server name</label>            <input type="text" name="server_name" >
                    </form>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-default pull-left" type="button" data-dismiss="modal" onclick="$('#createCompilationServerModal').css('display','none')">Close</button>
                    <button id="createCompilationServerButton" value="" class="btn btn-primary" type="button" onclick="newCompilationServer()">Save changes</button>
                </div>
            </div>
        </div>
    </div>



    <div class="row">
        <div class="col-md-12">
            <div class="box">
                <div class="box-header with-border">
                    <h3 class="box-title">Compilation Servers </h3>
                    <div class="pull-right">
                        <div class="btn-group">
                            <td><button class="btn btn-block btn-info" type="button" onclick="showCreateFormCompilationServer()">Create New One</button></td>
                        </div><!-- /.btn-group -->
                    </div><!-- /.pull-right -->
                </div>
                <div class="box-body">
                    <table id="allCompilationServers" class="table table-bordered">
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Unique identificator</th>
                            <th>Hash Certificate</th>
                            <th>Destination address</th>
                            <th>Online</th>
                            <th>EDIT</th>
                            <th>DELETE</th>
                        </tr>

                        @for(compilation_server <- Cloud_Compilation_Server.find.all()) {
                            <tr>
                                <td>@compilation_server.id</td>
                                <td>@compilation_server.server_name</td>
                                <td>@compilation_server.unique_identificator</td>
                                <td>@compilation_server.hash_certificate</td>
                                <td>@compilation_server.destination_address</td>
                                <td>@compilation_server.server_is_online()</td>
                                <td><button class="btn btn-block btn-info" type="button" onclick="showEditFormCompilationServer('@compilation_server.id', '@compilation_server.server_name')">Edit</button></td>
                                <td><button class="btn btn-block btn-danger" type="button" onclick="deleteCompilationServer(@compilation_server.id)">Delete</button></td>
                            </tr>
                        }

                    </table>
                </div>
                <div class="box-footer">
        </div>


            </div>
        </div>
    </div>
</section>


@*/*/*  HomerServer ---------------------------------------------------------------------------------------------   */*/*@

<section class="content">



    <div id="editHomerServerModal" style="display: none;" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Edit Type of Board</h4>
                </div>
                <div class="modal-body">
                    <form id="editHomerServer">

                        <label>Server Name</label>
                        <input type="text" class="form-control" id="name"  name="server_name" readonly>

                        <label style="">MQTT Port:</label>
                        <input type="text" class="form-control" id="mqtt_port"  name="mqtt_port">

                        <label style="">Grid Port:</label>
                        <input type="text" class="form-control" id="grid_port"  name="grid_port">

                        <label style="">Server Url:</label>
                        <input type="text" class="form-control" id="server_url"  name="server_url">
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default pull-left" type="button" data-dismiss="modal" onclick="$('#editHomerServerModal').css('display','none')">Close</button>
                    <button id="editHomerServerButton" value="" class="btn btn-primary" type="button" onclick="editHomerServer(this.value)">Save changes</button>
                </div>
            </div>
        </div>
    </div>


    <div id="createHomerServerModal" style="display: none;" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Create new Homer Server</h4>
                </div>
                <div class="modal-body">
                    <form id="newHomerServer")>

                        <label>Server name</label>
                        <input type="text" class="form-control" name="server_name" >

                        <label style="">MQTT Port:</label>
                        <input type="text" class="form-control" id="mqtt_port"  name="mqtt_port">

                        <label style="">Grid Port:</label>
                        <input type="text" class="form-control" id="grid_port"  name="grid_port">

                        <label style="">Server Url:</label>
                        <input type="text" class="form-control" id="server_url"  name="server_url">


                    </form>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-default pull-left" type="button" data-dismiss="modal" onclick="$('#createHomerServerModal').css('display','none')">Close</button>
                    <button id="createHomerServerButton" value="" class="btn btn-primary" type="button" onclick="newHomerServer()">Save changes</button>
                </div>
            </div>
        </div>
    </div>



    <div class="row">
        <div class="col-md-12">
            <div class="box">
                <div class="box-header with-border">
                    <h3 class="box-title">Homer Servers </h3>
                    <div class="pull-right">
                        <div class="btn-group">
                            <td><button class="btn btn-block btn-info" type="button" onclick="showCreateFormHomerServer()">Create New One</button></td>
                        </div><!-- /.btn-group -->
                    </div><!-- /.pull-right -->
                </div>
                <div class="box-body">
                    <table id="allHomerServers" class="table table-bordered">
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Unique identificator</th>
                            <th>Hash Certificate</th>
                            <th>Destination address</th>
                            <th>Online</th>
                            <th>EDIT</th>
                            <th>DELETE</th>
                        </tr>

                        @for(homer_server <- Cloud_Homer_Server.find.all()) {
                            <tr>
                                <td>@homer_server.id</td>
                                <td>@homer_server.server_name</td>
                                <td>@homer_server.unique_identificator</td>
                                <td>@homer_server.hash_certificate</td>
                                <td>@homer_server.destination_address</td>
                                <td>@homer_server.server_is_online()</td>
                                <td><button class="btn btn-block btn-info" type="button" onclick="showEditFormHomerServer('@homer_server.id', '@homer_server.server_name','@homer_server.mqtt_port', '@homer_server.grid_port',  '@homer_server.server_url' )">Edit</button></td>
                                <td><button class="btn btn-block btn-danger" type="button" onclick="deleteHomerServer(@homer_server.id)">Delete</button></td>
                            </tr>
                        }

                    </table>
                </div>
                <div class="box-footer">
        </div>


            </div>
        </div>
    </div>
</section>



<script>

@*/*/*  CompilationServer ----------------------------------------------------------------------------------------   */*/*@

function newCompilationServer(){
    model_data = $("#newCompilationServer").serializeObject();
    $.ajax({
        url: '@routes.CompilationLibrariesController.create_Compilation_Server()',
        type: 'POST',
        contentType: 'application/json',
        headers: {
            "X-AUTH-TOKEN":getCookie("authToken"),
            "Content-Type":"application/json"
        },
        data: JSON.stringify(model_data),
        dataType: 'json',
        success:function(e){
            $("#newCompilationServer input[type=text]").val("");
            $("#createCompilationServerModal").css("display","none");
            $('#allCompilationServers').load(document.URL +  ' #allCompilationServers');
        },
        error:function(e) {
            BootstrapDialog.show({
                message: syntaxHighlight(e),
                type: BootstrapDialog.TYPE_DANGER,
                buttons: [{
                    label: 'Close',
                    action: function(dialogItself) {
                        dialogItself.close();
                    }
                }]

            });
        }
    })}

function editCompilationServer(id){
    model_data = $("#editCompilationServer").serializeObject();

    $.ajax({
        url: '@routes.CompilationLibrariesController.edit_Compilation_Server("")' + id,
        url: "@Server.tyrion_serverAddress" + "/compilation/server" + id ,
        type: 'PUT',
        contentType: 'application/json',
        headers: {
            "X-AUTH-TOKEN":getCookie("authToken"),
            "Content-Type":"application/json"
        },
        data: JSON.stringify(model_data),
        dataType: 'json',
        success:function(e){
            $("#editCompilationServer input[type=text]").val("");
            $("#editCompilationServerModal").css("display","none");
            $('#allCompilationServers').load(document.URL +  ' #allCompilationServers');
        },
        error:function(e) {
            BootstrapDialog.show({
                message: syntaxHighlight(e),
                type: BootstrapDialog.TYPE_DANGER,
                buttons: [{
                    label: 'Close',
                    action: function(dialogItself) {
                        dialogItself.close();
                    }
                }]

            });
        }
    })}

function deleteCompilationServer(id){

    $.ajax({
        url: '@routes.CompilationLibrariesController.delete_Compilation_Server("")' + id,
        type: 'DELETE',
        headers: {
            "X-AUTH-TOKEN":getCookie("authToken"),
        },
        success:function(e){
            $('#allCompilationServers').load(document.URL +  ' #allCompilationServers');
        },
        error:function(e) {
            BootstrapDialog.show({
                message: syntaxHighlight(e),
                type: BootstrapDialog.TYPE_DANGER,
                buttons: [{
                    label: 'Close',
                    action: function(dialogItself) {
                        dialogItself.close();
                    }
                }]

            });
        }
    })}

function showEditFormCompilationServer(id, server_name, destination_address){
    $("#editCompilationServerModal").css("display","block");
    $('#editCompilationServerButton').val(id);
    $('#compilationServerId').text("ID = " + id);
    $("#editCompilationServer input[name=name]").val(server_name);
    $("#editCompilationServer input[name=destination_address]").val(destination_address);
}


function showCreateFormCompilationServer(){
    $("#createCompilationServerModal").css("display","block");
    $('#createCompilationServerButton').val();
    $("#newCompilationServer input[name=name]").val();
    $("#newtCompilationServer input[name=destination_address]").val();
}


@*/*/*  HomerServer ---------------------------------------------------------------------------------------------   */*/*@

function newHomerServer(){
    model_data = $("#newHomerServer").serializeObject();
    $.ajax({
        url: '@routes.ProgramingPackageController.create_Blocko_Server()',
        type: 'POST',
        contentType: 'application/json',
        headers: {
            "X-AUTH-TOKEN":getCookie("authToken"),
            "Content-Type":"application/json"
        },
        data: JSON.stringify(model_data),
        dataType: 'json',
        success:function(e){
            $("#newHomerServer input[type=text]").val("");
            $("#createHomerServerModal").css("display","none");
            $('#allHomerServers').load(document.URL +  ' #allHomerServers');
        },
        error:function(e) {
            BootstrapDialog.show({
                message: syntaxHighlight(e),
                type: BootstrapDialog.TYPE_DANGER,
                buttons: [{
                    label: 'Close',
                    action: function(dialogItself) {
                        dialogItself.close();
                    }
                }]

            });
        }
    })}

function editHomerServer(id){
    model_data = $("#editHomerServer").serializeObject();

    $.ajax({
        url: '@routes.ProgramingPackageController.edit_Blocko_Server("")' + id,
        type: 'PUT',
        contentType: 'application/json',
        headers: {
            "X-AUTH-TOKEN":getCookie("authToken"),
            "Content-Type":"application/json"
        },
        data: JSON.stringify(model_data),
        dataType: 'json',
        success:function(e){
            $("#editHomerServer input[type=text]").val("");
            $("#editHomerServerModal").css("display","none");
            $('#allHomerServers').load(document.URL +  ' #allHomerServers');
        },
        error:function(e) {
            BootstrapDialog.show({
                message: syntaxHighlight(e),
                type: BootstrapDialog.TYPE_DANGER,
                buttons: [{
                    label: 'Close',
                    action: function(dialogItself) {
                        dialogItself.close();
                    }
                }]

            });
        }
    })}

function deleteHomerServer(id){

    $.ajax({
        url: '@routes.ProgramingPackageController.delete_Blocko_Server("")' + id,
        type: 'DELETE',
        headers: {
            "X-AUTH-TOKEN":getCookie("authToken"),
        },
        success:function(e){
            $('#allHomerServers').load(document.URL +  ' #allHomerServers');
        },
        error:function(e) {
            BootstrapDialog.show({
                message: syntaxHighlight(e),
                type: BootstrapDialog.TYPE_DANGER,
                buttons: [{
                    label: 'Close',
                    action: function(dialogItself) {
                        dialogItself.close();
                    }
                }]

            });
        }
    })}

function showEditFormHomerServer(id, server_name, mqtt_port, grid_port, server_url){
    $("#editHomerServerModal").css("display","block");
    $('#editHomerServerButton').val(id);
    $('#compilationServerId').text("ID = " + id);

    $("#editHomerServer input[name=server_name]").val(server_name);
    $("#editHomerServer input[name=mqtt_port]").val(mqtt_port);
    $("#editHomerServer input[name=grid_port]").val(grid_port);
    $("#editHomerServer input[name=server_url]").val(server_url);

}


function showCreateFormHomerServer(){
    $("#createHomerServerModal").css("display","block");
    $('#createHomerServerButton').val();
    $("#newHomerServer input[name=name]").val();
    $("#newtHomerServer input[name=destination_address]").val();
}

</script>