
api.version: "1.13.32"// Version of Tyrion

# Server basic Settings ------------------------------------------------------------------------------------------------
Server {

  mode = "developer"              # {"developer", "stage", "production"} Pokud production = používá se jiné nastavení

  developer   = "localhost:9000"           // DEVELOPER
  test_server = "192.168.65.31:9000"       // DEVELOPER
  production  = "tyrion.byzance.cz"        // PRODUCTION
  stage       = "tyrion.stage.byzance.cz"  // STAGE


  webSocket_cache_timout = 5               // In seconds
}

# Becki Settings -------------------------------------------------------------------------------------------------------

Becki{

  developer {
    mainUrl = "localhost:8080"                                          // Základní adresa
  }

  test_server {
    mainUrl = "192.168.65.31"                                          // Základní adresa - Test Serveru
  }


  production{
    mainUrl = "portal.byzance.cz"                                          // Základní adresa
  }

  stage{
    mainUrl = "portal.stage.byzance.cz"                                          // Základní adresa
  }

  redirectOk = "login"                                 // Když se přihlášení přes sociální síť zadaří
  redirectFail = "login-failed"                        // Když se přihlášení přes sociální síť NEzadaří
  accountAuthorizedSuccessful = "login"                // Když uživatel skrz email potvrdí registraci
  accountAuthorizedFailed = "login-failed"             // Když uživatel skrz email potvrdí registraci ale něco se nepovedlo
  passwordReset = "password-restart"                   // Když uživatel Apinou požádá o restart hesla, kam ho link z emailu po ověření přepošle a co předá frontendu???
  invitationToCollaborate = "create-user/"              // Když je uživateli poslán email, že byl pozván ke spolupráci na projektu a zaregistrován

}

play.websocket.buffer.limit = 2621440


# Cache ----------------------------------------------------------------------------------------------------------------
Cache {

  Terracota {
    production.link = "https://fileserverbyzance.blob.core.windows.net/"
    developer.link  = "https://fileserverdeveloper.blob.core.windows.net/"
  }

  developer{

    Model_Board.CACHE = 10                      // Model
    Model_Board.CACHE_STATUS = 20               // Bolean

    Model_Person.CACHE = 5                      // Model
    Model_Person.CACHE_TOKEN = 20               // Bolean

    Model_HomerInstance.CACHE_STATUS = 20       // Bolean
    Model_HomerInstance.CACHE = 20              // Model

    Model_HomerServer.CACHE = 20                // Model

    Model_Project.CACHE = 20                    // Model
    Model_Project.CACHE_BECKI_CONNECTED_PERSONS = 20 // IdsList
    Model_CProgram.CACHE = 20                   // Model
    Model_BProgram.CACHE = 20                   // Model
    Model_MProject.CACHE = 20                   // Model
    Model_MProgram.CACHE = 20                   // Model
    Model_Library.CACHE = 200                   // Model
    Model_VersionObject.CACHE = 100             // Model
    Model_TypeOfBoard.CACHE = 20                // Model
    Model_BoardGroup.CACHE = 20                // Model
    Model_BootLoader.CACHE = 200              // Model

    Model_TypeOfBlock.CACHE = 20                // Model
    Model_BlockoBlock.CACHE = 20                // Model
    Model_BlockoBlockVersion.CACHE = 200        // Model


    Model_TypeOfWidget.CACHE = 20               // Model
    Model_GridWidget.CACHE = 20                 // Model
    Model_GridWidgetVersion.CACHE = 20          // Model

    Model_ActualizationProcedure.CACHE = 20     // Model
    Model_CProgramUpdatePlan.CACHE = 20         // Model

    Model_ProductExtension.CACHE_PRICE = 50
  }

  production {

    Model_Board.CACHE = 200                   // Model
    Model_Board.CACHE_STATUS = 1000           // Bolean

    Model_Person.CACHE = 200                  // Model
    Model_Person.CACHE_TOKEN = 200            // Bolean

    Model_HomerInstance.CACHE_STATUS = 100    // Bolean
    Model_HomerInstance.CACHE = 200           // Model

    Model_HomerServer.CACHE = 20              // Model
    Model_Project.CACHE = 200                 // Model
    Model_Project.CACHE_BECKI_CONNECTED_PERSONS = 200 // IdsList
    Model_CProgram.CACHE = 200                // Model
    Model_BProgram.CACHE = 200                // Model
    Model_MProject.CACHE = 200                // Model
    Model_MProgram.CACHE = 200                // Model
    Model_Library.CACHE = 2000                // Model
    Model_VersionObject.CACHE = 1000          // Model
    Model_TypeOfBoard.CACHE = 200             // Model
    Model_BoardGroup.CACHE = 200              // Model
    Model_BootLoader.CACHE = 200              // Model

    Model_TypeOfBlock.CACHE = 200              // Model
    Model_BlockoBlock.CACHE = 200              // Model
    Model_BlockoBlockVersion.CACHE = 200       // Model

    Model_TypeOfWidget.CACHE = 200             // Model
    Model_GridWidget.CACHE = 200               // Model
    Model_GridWidgetVersion.CACHE = 200        // Model

    Model_ActualizationProcedure.CACHE = 20     // Model
    Model_CProgramUpdatePlan.CACHE = 400       // Model

    Model_ProductExtension.CACHE_PRICE = 500
  }

  stage{

    Model_Board.CACHE = 10000                  // Model
    Model_Board.CACHE_STATUS = 20000           // Bolean

    Model_Person.CACHE = 100000                // Model
    Model_Person.CACHE_TOKEN = 150000          // Bolean

    Model_HomerInstance.CACHE_STATUS = 50000   // Bolean
    Model_HomerInstance.CACHE = 10000              // Model

    Model_HomerServer.CACHE = 10000            // Model

    Model_Project.CACHE = 2000                 // Model
    Model_Project.CACHE_BECKI_CONNECTED_PERSONS = 2000 // IdsList
    Model_CProgram.CACHE = 2000                // Model
    Model_BProgram.CACHE = 2000                // Model
    Model_MProject.CACHE = 2000                // Model
    Model_MProgram.CACHE = 2000                // Model
    Model_Library.CACHE = 2000                 // Model
    Model_VersionObject.CACHE = 5000           // Model
    Model_TypeOfBoard.CACHE = 200              // Model
    Model_BoardGroup.CACHE = 2000              // Model
    Model_BootLoader.CACHE = 200               // Model

    Model_TypeOfBlock.CACHE = 2000              // Model
    Model_BlockoBlock.CACHE = 2000              // Model
    Model_BlockoBlockVersion.CACHE = 2000       // Model

    Model_TypeOfWidget.CACHE = 2000             // Model
    Model_GridWidget.CACHE = 2000               // Model
    Model_GridWidgetVersion.CACHE = 2000        // Model

    Model_CProgramUpdatePlan.CACHE = 20000      // Model
    Model_ActualizationProcedure.CACHE = 20000  // Model

    Model_ProductExtension.CACHE_PRICE = 50000
  }

}

# Logger ---------------------------------------------------------------------------------------------------------------

Logger {

  youtrackUrl = "http://youtrack.byzance.cz"
  youtrackProject = "TYRION"
  youtrackId = "d33199ae-2f26-4588-8886-9273b4efc61a"
  youtrackSecret = "KTEWU11Gwf3F"
  youtrackScopeId = "aa50528b-ba3f-4381-bb4d-7144c4e76f4b"
  youtrackUsername = "Tyrion-server"
  youtrackPassword = "82asnvuzEBtdUhHY"

  youtrackApiKey = "perm:VHlyaW9uLXNlcnZlcg==.dHlyaW9u.H3u6DTgOcNDsrAGGNyPg9fKb98bHkI"

  developerSettings = "conf/logback/logback_dev.xml"
  productionSettings = "conf/logback/logback_prod.xml"

  //   If empty - All objects is logged. If you paste a group, only the objects in that group are logged.
  //   ERROR - is always logged!!

  // Pokud je prázdný - řídí se podle objektů
  // Pokud je v něm něco - je nadřazený seznam skupin
  // Skupiny přepusjí parameter objektů
  general_log_groups = ["global", "admin", "hardware", "hw_authority", "homer"]


  // Examples - For more detail please visit MarkDown Documentation
  groups {

    global        = ["TRACE::YELLOW"  , "Global" , "Controller_Security"]
    cache         = ["TRACE::YELLOW"  , "Server_Cache"]

    login         = ["TRACE::YELLOW"  , "Controller_Security"]

    project       = ["TRACE::YELLOW"  , "Controller_Project", "Model_Project", "Model_Invitation"]

    azure         = ["TRACE::YELLOW"  , "Model_FileRecord"]
    compilation   = ["TRACE::YELLOW"  , "Controller_Code", "Model_CProgram", "Model_CCompilation", "Model_FileRecord", "Model_VersionObject"]
    instance      = ["TRACE::YELLOW"  , "Model_HomerInstance"]
    hardware      = ["TRACE::YELLOW"  , "Model_Board"]
    hw_authority  = ["TRACE::YELLOW"  , "Hardware_Registration_Authority", "Batch_Registration_Authority"]


    grid          = ["TRACE::YELLOW"  , "Controller_Grid", "Model_GridWidget", "Model_GridWidgetVersion"]
    blocko        = ["TRACE::YELLOW"  , "Controller_Blocko", "Model_TypeOfBlock", "Model_BlockoBlock", "Model_BlockoBlockVersion", "Model_HomerInstance", "Model_HomerInstanceRecord"]

    scheduler     = ["TRACE::BLUE"    , "CustomScheduler", "Job_CertificateRenewal", "Job_LogAzureUpload", "Job_OldNotificationRemoval", "Job_RequestStatsUpdate", "Job_SpendingCredit", "Job_StuckCompilationCheck", "Job_UnauthenticatedPersonRemoval", "Job_UploadBlockoToCloud", "Job_UpdateServer", "Job_CheckCompilationLibraries"]
    admin         = ["TRACE::RED"     , "Controller_Admin"]

    homer         = ["TRACE::BLUE"    , "Synchronize_Homer_Synchronize_Settings", "Synchronize_Homer_Instance_after_connection", "Synchronize_Homer_Hardware_after_connection", "Synchronize_Homer_Unresolved_Updates", "Model_HomerServer", "WS_HomerServer"]
    compilation   = ["WARN::BLUE"     , "Controller_WebSocket", "WS_CompilerServer", "WS_Send_message", "Model_CompilationServer", "Model_CProgram","Model_CompilationServer" ]
    becki         = ["TRACE::BLUE"    , "WS_Becki_Website", "WS_Becki_Single_Connection", "WS_Send_message", "Notification_Tester", "NotificationHandler"]

    security      = ["TRACE::GREEN"   , "Secured_Admin", "Secured_API", "Socials", "TokenCache", "Controller_Security", "Controller_Permission", "Model_Permission", "YouTrack"]
    notification  = ["TRACE::PURPLE"  , "NotificationHandler", "Controller_Notification", "Model_Notification", "Notification_Tester", "NotificationActionHandler"]
    update        = ["TRACE::PURPLE"  , "Model_Board", "Model_CProgramUpdatePlan", "Model_ActualizationProcedure" , "Model_BootLoader"]
    picture       = ["TRACE::PURPLE"  , "Model_Board", "Controller_Board", "Model_Person", "Controller_Person", "Model_FileRecord", "Model_TypeOfBoard"]

    financial     = ["TRACE::GREEN"   , "Fakturoid", "Controller_Finance", "GoPay", "Job_SpendingCredit", "GoPay_PaymentCheck", "Fakturoid_InvoiceCheck", "FinancialPermission", "Model_Product", "Model_ProductExtension", "Model_Customer", "Model_Employee"]
  }
}

# Azure Blob secret Connection ----------------------------------------------------------------------------------------------

Azure {

  blob {

    production {
      azureConnectionSecret = "TODO"
      azureLink = "TODO"
    }

    stage {
      azureConnectionSecret = "DefaultEndpointsProtocol=https;AccountName=blobstagetyrion;AccountKey=5eBmclwyAryMYNCPtCtgc0W+8Jn4XBEBDehh4/jkzs10yCHWkU8UQz+GWJ/g50umWYk42O7Azxb/qS3Zr14+Rg=="
      azureLink = "https://blobstagetyrion.blob.core.windows.net/"
    }

    developer {
      azureConnectionSecret = "DefaultEndpointsProtocol=https;AccountName=byzancedeveloperblob;AccountKey=WSDDkL0lRVmbGKzNDOuHHkI71zJb4M916zB+AEC0yio3ke2ZKugErbDAGAZ71+F3hgkOvuiTfbSYGImyagTF4w==;EndpointSuffix=core.windows.net"
      azureLink = "https://byzancedeveloperblob.blob.core.windows.net/"
    }

  }

  documentDB {

    production {

      azureConnectionSecret = "TODO"
      azureLink = "TODO"
      databaseName = "TODO"

      RUsReserved {
        Model_Boad = 1;
      }
    }

    stage {
      azureConnectionSecret = "RK3GGvRxEIxGJIYBP8GAvbuDjbvzIP9RnVsP8Qrk8rXfFtv6BZaLfNpgvrOdDhZfTxeO9AA8t4wTSJeIZAfP2w=="
      azureLink = "https://nosqlstagebyzance.documents.azure.com:443/"
      databaseName = "StageDocumentDB"

      RUsReserved {
        Model_Boad = 1;
      }
    }

    developer {
      azureConnectionSecret = "RK3GGvRxEIxGJIYBP8GAvbuDjbvzIP9RnVsP8Qrk8rXfFtv6BZaLfNpgvrOdDhZfTxeO9AA8t4wTSJeIZAfP2w=="
      azureLink = "https://nosqlstagebyzance.documents.azure.com:443/"
      databaseName = "DeveloperDocumentDB"

      RUsReserved {
        Model_Boad = 1;
      }
    }

  }
}

#Social Login KEYS -----------------------------------------------------------------------------------------------------

Facebook{

  production{
    apiKey = 550327521801914
    clientSecret = 13e2fe4160a547368d230fb4f5296527
    url = "https://graph.facebook.com/v2.8/me"
    callBack = "/login/facebook/oauth_callback"
  }

  stage {
    apiKey = 550327521801914
    clientSecret = 13e2fe4160a547368d230fb4f5296527
    url = "https://graph.facebook.com/v2.8/me"
    callBack = "/login/facebook/oauth_callback"
  }

  developer{
    apiKey = 238413143258549
    clientSecret = 83a7bdb63897105c033589bec49ded1a
    url = "https://graph.facebook.com/v2.8/me"
    callBack = "/login/facebook/oauth_callback"
  }

}

GitHub {

  releasesUrl = "https://api.github.com/repos/ByzanceIoT/tyrion/releases"
  apiKey = "4d89903b259510a1257a67d396bd4aaf10cdde6a"

  production {
    apiKey = 67e2214c157611191894
    clientSecret = 7136691bece9ab1ad711204fc22c458a8ca7a35f
    url = "https://api.github.com/user"
    callBack = "/login/github/oauth_callback"
  }

  stage {
    apiKey = 01c18785758ea12c07ee
    clientSecret = 5a9f90dd426be3f96889e3d0d827e24c6c539e5a
    url = "https://api.github.com/user"
    callBack = "/login/github/oauth_callback"
  }

  developer{
    apiKey = 4afa319159255de36432
    clientSecret = cfab320ef60231a6bbad4b8ed8e5f6ba1ad9f6b8
    url = "https://api.github.com/user"
    callBack = "/login/github/oauth_callback"
  }

}

# Financial ------------------------------------------------------------------------------------------------------------

Financial {

  alpha_ending = 1521068400000

  # !!!important!!! due to scheduler cron expresions
  # allowable values = 1-4, 12, 24, 48
  production {
    spendDailyPeriod = 1
  }
  stage {
    spendDailyPeriod = 1
  }
  developer {
    spendDailyPeriod = 1
  }

  # prices are Long numbers ($1 = 1000)

  extensions {
    project {
      name = "Project"
      description = "This is an extension for project."
    }
    database {
      name = "Database"
      description = "This is an extension for database."
    }
    log {
      name = "Logging"
      description = "This is an extension for log."
    }
    rest_api {
      name = "RestAPI"
      description = "This is an extension for RestAPI."
    }
    support {
      name = "Support"
      description = "This is an extension for Support."
    }
    instance {
      name = "Instance"
      description = "This is an extension for Instance."
    }
    homer_server {
      name = "Homer Server"
      description = "This is an extension for Homer Server."
    }
    participant {
      name = "Project paricipant"
      description = "This is an extension for project participants."
    }
  }
}

# External Services Settings -------------------------------------------------------------------------------------------

Fakturoid {

  production{
     VelkeTODO = "!!"
  }

  developer {
    apiKey = d6aed8509cbb5fcd3d3533bb2ab79880d4764c46
    url = "https://app.fakturoid.cz/api/v2/accounts/mediacheckdev"
    callBack = "/fakturoid/callback"
    userAgent = "mediacheck (tomas.zaruba@byzance.cz)"
    secret_combo = "tomas.zaruba@byzance.cz:9593bee69be49771a9840afed7f530b208e92044"
  }

  stage {
    apiKey = d6aed8509cbb5fcd3d3533bb2ab79880d4764c46
    url = "https://app.fakturoid.cz/api/v2/accounts/mediacheckdev"
    callBack = "/fakturoid/callback"
    userAgent = "mediacheck (tomas.zaruba@byzance.cz)"
    secret_combo = "tomas.zaruba@byzance.cz:9593bee69be49771a9840afed7f530b208e92044"
  }
}


PrintNode {

  production{
    apiKey = 6aa35f3ae351e4664417ac894d99dbd4c35a0b95
    url = "https://api.printnode.com"
  }

  developer {
    apiKey = 6aa35f3ae351e4664417ac894d99dbd4c35a0b95
    url = "https://api.printnode.com"
  }

  stage {
    apiKey = 6aa35f3ae351e4664417ac894d99dbd4c35a0b95
    url = "https://api.printnode.com"
  }
}


# GO PAY----------------------------------------------------------------------------------------------------------------

GOPay{

  production{
    api_url = "https://gate.gopay.cz/api"
    client_id = 13e2fe4160a547368d230fb4f5296527
    client_credentials = "https://graph.facebook.com/v2.5/me"
    return_url = "https://tyrion.byzance.cz/go_pay/return"
    notification_url = "https://tyrion.byzance.cz/go_pay/notification"
    go_id = "45646546546545645456"
  }

  developer{
    api_url = "https://gw.sandbox.gopay.com/api"
    client_id = 1078479787
    client_secret = 9yCpGL7R
    secure_key = HPrtGeztEmbL7dWCGSaxCvMD

    return_url = "http://localhost:9000/go_pay/return"
    notification_url = "http://localhost:9000/go_pay/notification"
    go_id = 8449088054
  }

  stage{
    api_url = "https://gw.sandbox.gopay.com/api"
    client_id = 1078479787
    client_secret = 9yCpGL7R
    secure_key = HPrtGeztEmbL7dWCGSaxCvMD
    return_url = "https://stage.tyrion.byzance.cz/go_pay/return"
    notification_url = "https://stage.tyrion.byzance.cz/go_pay/notification"
    go_id = 8449088054
  }

}

  Slack {
    servers = "https://hooks.slack.com/services/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"
    hardware = "https://hooks.slack.com/services/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"
  }


  Grid_App {

    production{
      mainUrl = "app.byzance.cz"
    }

    stage{
      mainUrl = "app.stage.byzance.cz"
    }

    localhost{
      // Definuje se IP adresou počítače
    }

  }

  # Mailing  -------------------------------------------------------------------------------------------------------------
  play.mailer {
    host = "out.smtp.cz"
    user = "server@byzance.cz"
    password = CUw2P2yiQQ
  }

  play.ws.ssl{

    debug.all = false

    enabledCipherSuites = [
      "TLS_DHE_RSA_WITH_AES_128_GCM_SHA256",
      "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
      "TLS_DHE_RSA_WITH_AES_256_GCM_SHA384",
      "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
      "TLS_RSA_WITH_AES_128_CBC_SHA",
      "TLS_RSA_WITH_AES_256_CBC_SHA"
    ]
  }

  mandrillApiKey = -oA2YdBZVG2bNW5cKIZnWA

  # The application languages --------------------------------------------------------------------------------------------
  play.i18n.langs = [ "en", "cs-cz" ]

  #SWAGGER ---------------------------------------------------------------------------------------------------------------
  swagger {

    filter = "utilities.swagger.SwaggerFilter"

    api {
      basepatht: "http://localhost:9000"

      info = {
        contact: "Tyrion Team leader:: alexandr.tyls@byzance.cz, \n\n tyrion@byzance.cz, support@byzance.cz",
        description: "Aggregate API for communicating with the server Tyrion. Please carefully check each version. Some APIs require special permissions. Some are designed for only certain types of mobile devices. For more information write to Tyrion Team tyrion@byzance.cz",
        title: Tyrion Api,

        termsOfService: Terms Of Service,
        license: Terms Of Service,
        licenseUrl: "http://google.com"
      }
    }
  }


  play.modules {
    // enabled += "utilities.swagger.swagger_module.SwaggerModule"
    enabled += "play.modules.swagger.SwaggerModule"
    enabled += "play.api.db.DBModule"
    enabled += "play.api.db.HikariCPModule"
    disabled += "play.api.cache.EhCacheModule"
  }

  # Ebean Models
  ebean.default= ["models.*"]

  // POSTGRES ----------------------
  db.default.driver = org.postgresql.Driver

  // Zákaz přepisování databáze
  modules.evolutions.enabled=true

  play.evolutions.db.default.autoApply=true
  play.evolutions.db.default.autoApplyDowns=false
  //play.evolutions.db.default.autocommit = false

  // Pro produkční databázi
  //db.default.url="jdbc:postgresql://bitnami-postgresql-d811.cloudapp.net:5432/byzanceERP"
  //db.default.username=postgres
  //db.default.password=oW1USmfY

  //Pro Stage databázi
  //db.default.url="jdbc:postgresql://db.stage.byzance.cz:5432/byzance"
  //db.default.username=tyrion
  //db.default.password="nZvLkpqNG=a?37GFEiHq"

  // Pro developer databázi
  db.default.url="jdbc:postgresql://:5432/byzanceERP"
  db.default.username=postgres
  db.default.password=admin

  play.db.pool=bonecp

  play.db.prototype.bonecp {

    # Whether autocommit should be used
    autoCommit = true

    # If non null, the transaction isolation level to use.
    isolation = null

    # If non null, sets the catolog to use
    defaultCatalog = null

    # Whether the database should be treated as read only
    readOnly = false

    # Whether opened statements should be automatically closed
    closeOpenStatements = true

    # The pool partition count
    partitionCount = 4

    # The maximum number of connections per partition
    maxConnectionsPerPartition = 10

    # The minimum number of connections per partition
    minConnectionsPerPartition = 3

    # The increment to acquire connections in
    acquireIncrement = 1

    # The acquire retry attempts
    acquireRetryAttempts = 10

    # The delay to wait before retrying to acquire a connection
    acquireRetryDelay = 1 second

    # The connection timeout
    connectionTimeout = 15 second

    # The idle age to expire connections
    idleMaxAge = 3 minutes

    # The maximum a connection should live for
    maxConnectionAge = 1 hour

    # Whether JMX reporting should be disabled
    disableJMX = true

    # Whether statistics should be kept
    statisticsEnabled = false

    # How frequently idle connections should be tested
    idleConnectionTestPeriod = 1 minute

    # Disable connection tracking
    disableConnectionTracking = true

    # The time limit for executing queries. 0 means no time limit.
    queryExecuteTimeLimit = 0

    # Whether the connection should be reset when closed
    resetConnectionOnClose = false

    # Whether unresolved transations should be detected
    detectUnresolvedTransactions = false

    # An SQL statement to execute to test if a connection is ok after it is created.
    # Null turns this feature off.
    initSQL = null

    # An SQL statement to execute to test if a connection is ok before giving it out of the pool.
    # Null turns this feature off.
    connectionTestStatement = null

    # Whether SQL statements should be logged
    logStatements = false
  }

  // Utils ---------------------------------------------------------------------------------------------------------------
  # CryptoKey - nyní nevyužíván z důvodů balíčkového nasazení na cloud_blocko_server pomocí gitu.
  #play.crypto.secret = "8Obh7cuaV6GJyqIhkLVSCICc27fIUEWlmwEdsRSKYeFhrUAzSYOOYFrWa7zE6arSIL3aRiJ"
  play.crypto.secret = 8Obh7cuaV6GJ
